<html>
<head>
<script src="json-to-table.js"></script>
<script src="ledamot.js"></script>
<script>
var antalmandat=5;
var d={'roster':{'hej':1,'två':2}};
//var liströst={'L1':3898,'L2':1478,'L3':3473};
//var kandidat={'L1':['A','B','C'],'L2':['A','F','G','B'],'L3':['A','H','I']};

var liströst={
        "L4": 86,
        "L7": 94,
        "L8": 67,
        "L9": 254,
        "L10": 187,
        "L11": 105,
        "L12": 424,
        "L13": 141
};
var kandidat={
"L4": [
"Eva J",
"Carola F",
"Ulla A",
"Eva B",
"Irene D"
],
"L7": [
"Eva J",
"Eva B",
"Tommy R",
"Ulla A",
"Karl-Goran H",
"Carola F",
"Lars-Erik F",
"Angelica S"
],
"L8": [
"Karl-Goran H",
"Eva J",
"Tommy R",
"Ulla A",
"Reidar E"
],
"L9": [
"Carola F",
"Tommy R",
"Eva J",
"Karl-Goran H",
"Ulla A",
"Lars-Erik F",
"Eva B",
"Ronny S"
],
"L10": [
"Ulla A",
"Tommy R",
"Carola F",
"Karl-Goran H",
"Eva J",
"Lars-Erik F",
"Eva B",
"Jonny R"
],
"L11": [
"Tomas R"
],
"L12": [
"Eva J",
"Karl-Goran H",
"Carola F",
"Tommy R",
"Ulla A",
"Lars-Erik F",
"Eva B",
"Ulf P",
"Angelica S"
],
"L13": [
"Tommy R",
"Eva B",
"Ulf P",
"Dagny T"
]
};
window.onload=function() {
    document.getElementById("input").antalmandat.value=antalmandat;
    document.getElementById("input").liströst.value=JSON.stringify(liströst,null, "\t");
    document.getElementById("input").kandidat.value=JSON.stringify(kandidat,null, "\t");
}

function kör(f) {
    var liströst=eval('(' + f.liströst.value + ')');
console.log(liströst);
    var kandidat=eval('(' + f.kandidat.value + ')');
var antalmandat=f.antalmandat.value;
var ledamot = valda(liströst,kandidat,antalmandat);
	    window.document.getElementById('led').innerHTML=JSON.stringify(ledamot,null,"\t");



window.document.getElementById('tabb').innerHTML=ConvertJsonToTable(ledamot, 'jsonTable', null, 'Download');
}
</script>
</head>
<body>
<form id="input">
<input type="text" name="antalmandat"><p>
<textarea name="liströst" rows="5" cols="50"></textarea><p>
<textarea name="kandidat" rows="5" cols="50"></textarea><p>
    <input type="button" value="Beräkna" onclick="kör(this.form);">
</form>
<div id="led"></div>
<div id="tabb"></div>
</body>
</html>
